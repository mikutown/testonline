<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/views/layout/head :: content}"></head>
<body class="hold-transition skin-green-light sidebar-mini">
<div class="wrapper">

    <!-- Main Header -->
    <div th:replace="~{/views/layout/header :: headerAA}"></div>
    <!-- Left side column. contains the logo and sidebar -->
    <div th:replace="~{/views/layout/menuroot :: menuroot}"></div>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                题目管理
                <small>管理所有题目</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> 首页</a></li>
                <li><a href="#">题库管理</a></li>
                <li class="active">题目管理</li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="content">
            <div class="row">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title">题目列表</h3>
                            <small>如果想查看题目的详细信息，请点击修改按钮</small>
                        </div>
                        <div id="toolbar">
                            <div class="pull-left">
                                <button type="button" class="btn btn-primary" data-toggle="modal"
                                        data-target="#QuestionTypeModal">
                                    <i class="fa fa-file">添加题目</i>
                                </button>
                                <button type="button" class="btn btn-danger" id="removeBtn">
                                    <i class="fa fa-file">批量删除</i>
                                </button>
                            </div>
                            <div class="pull-right">
                                <input type="text" id="keyword" placeholder="按照名称查询">
                                <button type="button" class="btn btn-info" id="searchBtn">
                                    <i class="fa fa-search">搜索</i>
                                </button>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body">
                            <table id="questionTable"></table>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- Main Footer -->
    <div th:replace="~{/views/layout/foot :: footer}"></div>
    <!-- 题型 Modal -->
    <div class="modal fade" id="QuestionTypeModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">题目添加</h4>
                </div>
                <div class="modal-body" id="quesAddModalBody">
                    <form id="quesAddModalForm">
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请先选择要添加题目的题目类型，然后点击添加按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 单选题 Modal -->
    <div class="modal fade" id="ChoseModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">单选题添加</h4>
                </div>
                <div class="modal-body">
                    <form id="choseAddModalForm">
                        <div class="form-group">
                            <label for="choseTitle">题目</label>
                            <textarea id="choseTitle" class="form-control" rows="3" placeholder="请输入题目"></textarea>
                        </div>

                        <div class="form-group">
                            <label>分值</label>
                            <select class="form-control" id="choseScore">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>选项A</label>
                            <input type="text" id="choseAnsA" class="form-control" placeholder="请输入选项A的内容">
                        </div>
                        <div class="form-group">
                            <label>选项B</label>
                            <input type="text" id="choseAnsB" class="form-control" placeholder="请输入选项B的内容">
                        </div>
                        <div class="form-group">
                            <label>选项C</label>
                            <input type="text" id="choseAnsC" class="form-control" placeholder="请输入选项C的内容">
                        </div>
                        <div class="form-group">
                            <label>选项D</label>
                            <input type="text" id="choseAnsD" class="form-control" placeholder="请输入选项D的内容">
                        </div>
                        <div class="form-group">
                            <label>答案</label>
                            <select class="form-control" id="choseAnswer">
                                <option>请选择...</option>
                                <option value="1000">A</option>
                                <option value="100">B</option>
                                <option value="10">C</option>
                                <option value="1">D</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" id="choseQuesAddBtn">添加</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请输入表单内所需数据，然后点击添加按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 多选题 Modal -->
    <div class="modal fade" id="MultiChoseModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">多选题添加</h4>
                </div>
                <div class="modal-body">
                    <form id="multiChoseAddModalForm">
                        <div class="form-group">
                            <label for="multiTitle">题目</label>
                            <textarea id="multiTitle" class="form-control" rows="3" placeholder="请输入题目"></textarea>
                        </div>

                        <div class="form-group">
                            <label>分值</label>
                            <select class="form-control" id="multiScore">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>选项A</label>
                            <input type="text" id="multiAnsA" class="form-control" placeholder="请输入选项A的内容">
                        </div>
                        <div class="form-group">
                            <label>选项B</label>
                            <input type="text" id="multiAnsB" class="form-control" placeholder="请输入选项B的内容">
                        </div>
                        <div class="form-group">
                            <label>选项C</label>
                            <input type="text" id="multiAnsC" class="form-control" placeholder="请输入选项C的内容">
                        </div>
                        <div class="form-group">
                            <label>选项D</label>
                            <input type="text" id="multiAnsD" class="form-control" placeholder="请输入选项D的内容">
                        </div>
                        <div class="form-group">
                            <label>选项E</label>
                            <input type="text" id="multiAnsE" class="form-control" placeholder="请输入选项E的内容">
                        </div>
                        <div class="form-group">
                            <label>答案</label>
                            <select id="RealansA">
                                <option value="0">-</option>
                                <option value="10000">A</option>
                            </select>
                            <select id="RealansB">
                                <option value="0">-</option>
                                <option value="1000">B</option>
                            </select>
                            <select id="RealansC">
                                <option value="0">-</option>
                                <option value="100">C</option>
                            </select>
                            <select id="RealansD">
                                <option value="0">-</option>
                                <option value="10">D</option>
                            </select>
                            <select id="RealansE">
                                <option value="0">-</option>
                                <option value="1">E</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" id="multiQuesAddBtn">添加</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请输入表单内所需数据，然后点击添加按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 判断题 Modal -->
    <div class="modal fade" id="JudgeModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">判断题添加</h4>
                </div>
                <div class="modal-body">
                    <form id="judgeAddModalForm">
                        <div class="form-group">
                            <label for="judgeTitle">题目</label>
                            <textarea id="judgeTitle" class="form-control" rows="3" placeholder="请输入题目"></textarea>
                        </div>

                        <div class="form-group">
                            <label>分值</label>
                            <select class="form-control" id="judgeScore">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>答案</label>
                            <select class="form-control" id="judgeAnswer">
                                <option>请选择...</option>
                                <option value="1">正确✅</option>
                                <option value="0">错误❌</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" id="judgeQuesAddBtn">添加</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请输入表单内所需数据，然后点击添加按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 其他题 Modal -->
    <div class="modal fade" id="OtherModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">其他类型题目添加</h4>
                </div>
                <div class="modal-body">
                    <form id="otherAddForm">
                        <div class="form-group">
                            <label for="otherTitle">题目</label>
                            <textarea id="otherTitle" class="form-control" rows="3" placeholder="请输入题目"></textarea>
                        </div>
                        <div class="form-group">
                            <label>分值</label>
                            <select class="form-control" id="otherScore">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="otherAnswer">答案</label>
                            <textarea id="otherAnswer" class="form-control" rows="3" placeholder="请输入答案"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" id="otherQuesAddBtn">添加</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请输入表单内所需数据，然后点击添加按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 图片add Modal -->
    <div class="modal fade" id="PictureAddModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">为题目添加图片</h4>
                </div>
                <div class="modal-body">
<!--                    picAddForm-->
                    <form id="pictureUploadForm" enctype="multipart/form-data">
                        文件:<input id="file" type="file" name="file"/>
                    </form>
                    <button class="btn btn-primary" id="uploadBtn">上传</button>

                </div>
                <div class="modal-footer">
                    <span>请在选择好要上传的图片后，点击添加按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>


    <!-- 单选题修改 Modal -->
    <div class="modal fade" id="ChoseModifyModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">单选题修改</h4>
                </div>
                <div class="modal-body">
                    <form id="choseModifyForm">
                        <div class="form-group">
                            <label for="choseModifyTitle">题目</label>
                            <textarea id="choseModifyTitle" class="form-control" rows="3" placeholder="请输入题目"></textarea>
                        </div>

                        <div class="form-group">
                            <label>分值</label>
                            <select class="form-control" id="choseModifyScore">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>选项A</label>
                            <input type="text" id="choseModifyAnsA" class="form-control" placeholder="请输入选项A的内容">
                        </div>
                        <div class="form-group">
                            <label>选项B</label>
                            <input type="text" id="choseModifyAnsB" class="form-control" placeholder="请输入选项B的内容">
                        </div>
                        <div class="form-group">
                            <label>选项C</label>
                            <input type="text" id="choseModifyAnsC" class="form-control" placeholder="请输入选项C的内容">
                        </div>
                        <div class="form-group">
                            <label>选项D</label>
                            <input type="text" id="choseModifyAnsD" class="form-control" placeholder="请输入选项D的内容">
                        </div>
                        <div class="form-group">
                            <label>答案</label>
                            <select class="form-control" id="choseModifyAnswer">
                                <option>请选择...</option>
                                <option value="1000">A</option>
                                <option value="100">B</option>
                                <option value="10">C</option>
                                <option value="1">D</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" id="choseModifyQuesAddBtn">修改</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请输入表单内所需数据，然后点击修改按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 多选题 Modal -->
    <div class="modal fade" id="MultiChoseModifyModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">多选题修改</h4>
                </div>
                <div class="modal-body">
                    <form id="multiChoseModifyForm">
                        <div class="form-group">
                            <label for="multiModifyTitle">题目</label>
                            <textarea id="multiModifyTitle" class="form-control" rows="3" placeholder="请输入题目"></textarea>
                        </div>

                        <div class="form-group">
                            <label>分值</label>
                            <select class="form-control" id="multiModifyScore">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>选项A</label>
                            <input type="text" id="multiModifyAnsA" class="form-control" placeholder="请输入选项A的内容">
                        </div>
                        <div class="form-group">
                            <label>选项B</label>
                            <input type="text" id="multiModifyAnsB" class="form-control" placeholder="请输入选项B的内容">
                        </div>
                        <div class="form-group">
                            <label>选项C</label>
                            <input type="text" id="multiModifyAnsC" class="form-control" placeholder="请输入选项C的内容">
                        </div>
                        <div class="form-group">
                            <label>选项D</label>
                            <input type="text" id="multiModifyAnsD" class="form-control" placeholder="请输入选项D的内容">
                        </div>
                        <div class="form-group">
                            <label>选项E</label>
                            <input type="text" id="multiModifyAnsE" class="form-control" placeholder="请输入选项E的内容">
                        </div>
                        <div class="form-group">
                            <label>答案</label>
                            <select id="RealModifyansA">
                                <option value="0">-</option>
                                <option value="10000">A</option>
                            </select>
                            <select id="RealModifyansB">
                                <option value="0">-</option>
                                <option value="1000">B</option>
                            </select>
                            <select id="RealModifyansC">
                                <option value="0">-</option>
                                <option value="100">C</option>
                            </select>
                            <select id="RealModifyansD">
                                <option value="0">-</option>
                                <option value="10">D</option>
                            </select>
                            <select id="RealModifyansE">
                                <option value="0">-</option>
                                <option value="1">E</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" id="multiQuesModifyBtn">添加</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请输入表单内所需数据，然后点击修改按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 判断题 Modal -->
    <div class="modal fade" id="JudgeModifyModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">判断题修改</h4>
                </div>
                <div class="modal-body">
                    <form id="judgeModifyForm">
                        <div class="form-group">
                            <label for="judgeModifyTitle">题目</label>
                            <textarea id="judgeModifyTitle" class="form-control" rows="3" placeholder="请输入题目"></textarea>
                        </div>

                        <div class="form-group">
                            <label>分值</label>
                            <select class="form-control" id="judgeModifyScore">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>答案</label>
                            <select class="form-control" id="judgeModifyAnswer">
                                <option>请选择...</option>
                                <option value="1">正确✅</option>
                                <option value="0">错误❌</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" id="judgeModifyBtn">修改</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请输入表单内所需数据，然后点击修改按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 其他题 Modal -->
    <div class="modal fade" id="OtherModifyModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">其他类型题目修改</h4>
                </div>
                <div class="modal-body">
                    <form id="otherModifyForm">
                        <div class="form-group">
                            <label for="otherModifyTitle">题目</label>
                            <textarea id="otherModifyTitle" class="form-control" rows="3" placeholder="请输入题目"></textarea>
                        </div>

                        <div class="form-group">
                            <label>分值</label>
                            <select class="form-control" id="otherModifyScore">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="otherModifyAnswer">答案</label>
                            <textarea id="otherModifyAnswer" class="form-control" rows="3" placeholder="请输入答案"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" id="otherModifyBtn">添加</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <span>请输入表单内所需数据，然后点击修改按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- 图片修改 Modal -->
    <div class="modal fade" id="PictureModifyModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">修改图片</h4>
                </div>
                <div class="modal-body">
                    <div id="PicModifyBody">

                    </div>
                    <div>
                        <form id="pictureReUploadForm" enctype="multipart/form-data">
                            文件:<input id="Refile" type="file" name="file"/>
                        </form>
                        <button class="btn btn-primary" id="reUploadBtn">上传</button>
                    </div>

                </div>
                <div class="modal-footer">
                    <span>请在选择完文件之后点击修改按钮</span>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>


</div>
<!-- ./wrapper -->
<script type="text/javascript">
    //菜单对应的被选中
    $(function () {
        $(".active").removeClass("active");
        $("#probtree").addClass("active");
        $("#quesmanage").addClass("active");
    });
    //表格渲染
    $(function () {
        $("#questionTable").bootstrapTable({
            url: '/question/list',
            pagination: true,//是否分页
            toolbar: "#toolbar",
            toolbarAlign: "right",
            //search: true,//是否允许搜索
            queryParamsType: 'limit',
            queryParams: queryParams,
            sidePagination: 'server',
            dataField: "data",
            columns: [{//表头
                field: 'quesId',
                title: 'ID'
            }, {
                field: 'typeId',
                title: '题型',
                formatter: function (value) {
                    var typeNameEnd;
                    $.ajax({
                        url: '/type/gettypebyid?id=' + value,
                        method: 'get',
                        async: false,//异步回显
                        success: function (data) {
                            typeNameEnd = data.typename;
                        }
                    });
                    return typeNameEnd;
                }
            }, {
                field: 'title',
                title: '题干'
            }, {
                field: 'score',
                title: '题目分值',

            }, {
                field: 'ansa',
                title: '选项A',
            }, {
                field: 'ansb',
                title: '选项B',
            }, {
                field: 'ansc',
                title: '选项C',
            }, {
                field: 'ansd',
                title: '选项D',
            }, {
                field: 'anse',
                title: '选项E',
            }, {
                field: 'answer',
                title: '非选择题答案',
                formatter: function (value, row) {
                    if (row.typeId == 3) {//如果是判断题
                        if (value == 1) {
                            return "正确";
                        } else {
                            return "错误"
                        }
                    } else {
                        return value;
                    }
                }
            },
                {
                    field: 'choanswer',
                    title: '选择题答案',
                    formatter: function (value, row) {
                        if (row.typeId == 1) {
                            //单选题
                            if (value == 1000) {
                                return "A";
                            } else if (value == 100) {
                                return "B";
                            } else if (value == 10) {
                                return "C"
                            } else if (value == 1) {
                                return "D"
                            }
                        } else if (row.typeId == 2) {
                            //多选题
                            let answer = "";
                            if (value >= 10000) {
                                answer += "A";
                                value -= 10000;
                            }
                            if (value >= 1000) {
                                answer += "B";
                                value -= 1000;
                            }
                            if (value >= 100) {
                                answer += "C";
                                value -= 100;
                            }
                            if (value >= 10) {
                                answer += "D";
                                value -= 10;
                            }
                            if (value == 1) {
                                answer += "E";
                            }
                            return answer;

                        }
                    }
                }, {
                    title: '操作',
                    formatter: function (value, row) {
                        if(row.quespic!=null){
                            return [
                                '<button  type="button" class="btn btn-primary btn-edit btn-xs" ',
                                'onClick=ModifyPic('+ row.quesId+',"'+ row.quespic + '")>',
                                '<i class="fa fa-edit" >查看/修改图片</i></button>',
                                '<button  type="button" class="btn btn-warning btn-edit btn-xs" ',
                                'onClick=modifyQuestion(' + row.typeId +','+ row.quesId+ ')>',
                                '<i class="fa fa-edit" >修改</i></button>',
                                '<button type="button" class="btn btn-danger btn-xs" ',
                                'onClick=removeQuestion(' + row.quesId + ')>',
                                '<i class="fa fa-remove" >删除</i></button>']
                                .join('');
                        }else{
                            return [
                                '<button  type="button" class="btn btn-primary btn-edit btn-xs" ',
                                'onClick=AddPic('+ row.quesId + ')>',
                                '<i class="fa fa-edit" >添加图片</i></button>',
                                '<button  type="button" class="btn btn-warning btn-edit btn-xs" ',
                                'onClick=modifyQuestion(' + row.typeId +','+ row.quesId+ ')>',
                                '<i class="fa fa-edit" >修改</i></button>',

                                '<button type="button" class="btn btn-danger btn-xs" ',
                                'onClick=removeQuestion(' + row.quesId + ')>',
                                '<i class="fa fa-remove" >删除</i></button>']
                                .join('');
                        }

                    }
                }]

        });

        function queryParams(params) {
            return {
                //把我们的pageNum，pageSize传到命令中去
                pageSize: params.limit,
                pageNum: params.offset / params.limit + 1,
                keyword: $("#keyword").val()
            }
        }
    });
    //添加题目模态框初始化
    $("#QuestionTypeModal").on('show.bs.modal', function (e) {
        showTypeForm();
    });

    //添加图片
    function AddPic(quesId) {
        $.session.remove('quespic');
        $.session.remove('quesId');
        $.session.set('quesId',quesId);
        $("#PictureAddModal").modal('show');
    }
    //打开模态框时清空表单
    $("#PictureAddModal").on('show.bs.modal', function (e) {
        $("#pictureUploadForm")[0].reset();
    });
    //添加图片的操作 开始
    $(function () {
        $("#uploadBtn").click(function () {
            var formData = new FormData($('#pictureUploadForm')[0]);
            $.ajax({
                type: "post",
                url: basePath+"/picture/add",
                data: formData,
                cache: false,
                processData: false,
                contentType: false,
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $.session.set('quespic',json["data"]);
                        $("#pictureUploadForm")[0].reset();
                        layer.msg(json["msg"], {
                            time: 0,
                            btn: ['确定', '不了'],
                            yes: function (index) {
                                layer.close(index);
                                $("#PictureAddModal").modal('hide');
                                var quesId = $.session.get('quesId');
                                var quespic = $.session.get('quespic');
                                //console.log("quesId:"+quesId+"  quespic:"+quespic);
                                $.ajax({
                                    type: "POST",
                                    contentType: "application/json",
                                    url: basePath + '/picture/addtoquestion',
                                    data: JSON.stringify({"quesId":quesId,"quespic":quespic}),
                                    dataType: "json",
                                    success: function (msg) {
                                        var json = msg["data"];
                                        if (json["success"]) {
                                            layer.msg(json["msg"], {icon: 6,time:2000});
                                            $("#questionTable").bootstrapTable("refresh");
                                        } else {
                                            layer.msg(json["msg"], {icon: 5,time:2000});
                                        }
                                    },
                                    error: function (data) {
                                        layer.msg("未知错误！", {icon: 5,time:2000});
                                    }
                                })
                            },

                        })


                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            })
        })
    })

    //修改图片
    function ModifyPic(quesId,quespic) {
        $.session.remove('quespic');
        $.session.remove('quesId');
        $.session.set('quesId',quesId);
        $.session.set('quespic',quespic);
        $("#PictureModifyModal").modal('show');
    }
    //打开模态框时清空表单
    $("#PictureModifyModal").on('show.bs.modal', function (e) {
        quespic = $.session.get('quespic');
        quesId = $.session.get('quesId');
        $("#PicModifyBody").empty();
        $("#pictureReUploadForm")[0].reset();
        $.ajax({
            url: '/question/getpicbyquesid?id=' + quesId,
            method: 'get',
            success: function (data) {
                // console.log(data);//测试能否得到question
                $("#PicModifyBody").append('图片路径：<div>'+quespic+'</div>\n' +
                    '<img src="'+quespic+'" alt="" width="350" />');

            }

        })
    });
    //修改图片的操作 开始
    $(function () {
        $("#reUploadBtn").click(function () {
            var formData = new FormData($('#pictureReUploadForm')[0]);
            $.ajax({
                type: "post",
                url: basePath+"/picture/add",
                data: formData,
                cache: false,
                processData: false,
                contentType: false,
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $.session.set('quespic',json["data"]);
                        $("#pictureReUploadForm")[0].reset();
                        layer.msg(json["msg"], {
                            time: 0,
                            btn: ['确定', '不了'],
                            yes: function (index) {
                                layer.close(index);
                                $("#PictureModifyModal").modal('hide');
                                var quesId = $.session.get('quesId');
                                var quespic = $.session.get('quespic');
                                //console.log("quesId:"+quesId+"  quespic:"+quespic);
                                $.ajax({
                                    type: "POST",
                                    contentType: "application/json",
                                    url: basePath + '/picture/addtoquestion',
                                    data: JSON.stringify({"quesId":quesId,"quespic":quespic}),
                                    dataType: "json",
                                    success: function (msg) {
                                        var json = msg["data"];
                                        if (json["success"]) {
                                            layer.msg(json["msg"], {icon: 6,time:2000});
                                            $("#questionTable").bootstrapTable("refresh");
                                        } else {
                                            layer.msg(json["msg"], {icon: 5,time:2000});
                                        }
                                    },
                                    error: function (data) {
                                        layer.msg("未知错误！", {icon: 5,time:2000});
                                    }
                                })
                            },

                        })


                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            })
        })
    })


    function showTypeForm() {
        $("#quesAddModalForm").empty();
        $("#quesAddModalForm").append('<div class="form-group" id="quesTypeFmGrop">\n' +
            '                  <label>请选择添加问题的题目类型</label>\n' +
            '                  <select id="quesTypeSelect" class="form-control">\n' +
            '                  <option value="0">请选择...</option></select>\n' +
            '                </div>' +
            '                <button type="button" class="btn btn-primary" id="quesTypeBtn">确定</button>');
        //查询所有type
        $.ajax({
            type: "POST",
            contentType: "application/json",
            url: basePath + "/type/listall",
            success: function (typeObj) {
                for (let i = 0; i < typeObj.length; i++) {
                    $("#quesTypeSelect").append('<option value=' + typeObj[i].typeId + '>' + typeObj[i].typename + '</option>')
                }
            }
        });
        $("#quesTypeBtn").click(function () {
            $.session.remove('typeId');
            var typeId = $("#quesTypeSelect option:selected").val();
            showAddModal(typeId);

        })
    }
    //根据不同的题型加载不同的问题框
    function showAddModal(typeId) {
        $.session.set('typeId', typeId);
        if (typeId == 0) {//未选择 报错一下
            layer.msg("请选择一个题型！", {icon: 5, time: 2000});
        } else if (typeId == 1) {//单选题
            $("#QuestionTypeModal").modal('hide');
            $("#ChoseModal").modal('show');
        } else if (typeId == 2) {//多选题
            $("#QuestionTypeModal").modal('hide');
            $("#MultiChoseModal").modal('show');
        } else if (typeId == 3) {//判断题
            $("#QuestionTypeModal").modal('hide');
            $("#JudgeModal").modal('show');
        } else {//解答题填空题其他题型
            $("#QuestionTypeModal").modal('hide');
            $("#OtherModal").modal('show');
        }
    }
    //添加不同的问题
    $("#otherAddForm").validate({
        rules: {
            otherTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            otherScore: {
                required: true,
            },
            otherAnswer: {
                required: true,
            },
        },
        messages: {
            //定义消息
            otherTitle: {
                required: "请输入题目!",
            },
            otherScore: {
                required: "请选择分值!"
            },
            otherAnswer: {
                required: "请输入题目答案!",
            },
        },
        submitHandler: function (form) {
            var typeId = $.session.get('typeId');
            var title = $("#otherTitle").val();
            var score = $("#otherScore option:selected").val();
            var answer = $("#otherAnswer").val();
            //console.log(answer);
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/save",
                data: JSON.stringify({"typeId": typeId, "title": title, "score": score, "answer": answer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#otherAddForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#OtherModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");

                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });
    $("#judgeAddModalForm").validate({
        rules: {
            judgeTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            judgeScore: {
                required: true,
            },
            judgeAnswer: {
                required: true,
            },
        },
        messages: {
            //定义消息
            judgeTitle: {
                required: "请输入题目!",
            },
            judgeScore: {
                required: "请选择分值!"
            },
            judgeAnswer: {
                required: "请选择答案!",
            },
        },
        submitHandler: function (form) {
            var typeId = $.session.get('typeId');
            var title = $("#judgeTitle").val();
            var score = $("#judgeScore option:selected").val();
            var answer = $("#judgeAnswer").val();
            //console.log(answer);
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/save",
                data: JSON.stringify({"typeId": typeId, "title": title, "score": score, "answer": answer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#judgeAddModalForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#JudgeModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");
                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });
    $("#choseAddModalForm").validate({
        rules: {
            choseTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            choseScore: {
                required: true,
            },
            choseAnsA: {
                required:true,
            },
            choseAnsB: {
                required:true,
            },
            choseAnsC: {
                required:true,
            },
            choseAnsD: {
                required:true,
            },
            choseAnswer: {
                required: true,
            },
        },
        messages: {
            //定义消息
            choseTitle: {
                required: "请输入题目!",
            },
            choseScore: {
                required: "请选择分值!"
            },
            choseAnsA: {
                required: "请输入A选项内容！"
            },
            choseAnsB: {
                required: "请输入A选项内容！"
            },
            choseAnsC: {
                required: "请输入A选项内容！"
            },
            choseAnsD: {
                required: "请输入A选项内容！"
            },
            choseAnswer: {
                required: "请选择答案!",
            },
        },
        submitHandler: function (form) {
            var typeId = $.session.get('typeId');
            var title = $("#choseTitle").val();
            var score = $("#choseScore option:selected").val();
            var ansa = $("#choseAnsA").val();
            var ansb = $("#choseAnsB").val();
            var ansc = $("#choseAnsC").val();
            var ansd = $("#choseAnsD").val();
            var choanswer = $("#choseAnswer").val();
            console.log("typeId"+ typeId+ "title"+ title+ "score"+ score+ "ansa"+ ansa+"ansb"+ ansb+"ansc"+ansc+"ansd"+ansd+"choanswer"+ choanswer)
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/save",
                data: JSON.stringify({"typeId": typeId, "title": title, "score": score, "ansa": ansa,"ansb": ansb,"ansc":ansc,"ansd":ansd,"choanswer": choanswer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#choseAddModalForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#ChoseModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");
                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });
    $("#choseAddModalForm").validate({
        rules: {
            choseTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            choseScore: {
                required: true,
            },
            choseAnsA: {
                required:true,
            },
            choseAnsB: {
                required:true,
            },
            choseAnsC: {
                required:true,
            },
            choseAnsD: {
                required:true,
            },
            choseAnswer: {
                required: true,
            },
        },
        messages: {
            //定义消息
            choseTitle: {
                required: "请输入题目!",
            },
            choseScore: {
                required: "请选择分值!"
            },
            choseAnsA: {
                required: "请输入A选项内容！"
            },
            choseAnsB: {
                required: "请输入A选项内容！"
            },
            choseAnsC: {
                required: "请输入A选项内容！"
            },
            choseAnsD: {
                required: "请输入A选项内容！"
            },
            choseAnswer: {
                required: "请选择答案!",
            },
        },
        submitHandler: function (form) {
            var typeId = $.session.get('typeId');
            var title = $("#choseTitle").val();
            var score = $("#choseScore option:selected").val();
            var ansa = $("#choseAnsA").val();
            var ansb = $("#choseAnsB").val();
            var ansc = $("#choseAnsC").val();
            var ansd = $("#choseAnsD").val();
            var choanswer = $("#choseAnswer").val();
            //console.log("typeId"+ typeId+ "title"+ title+ "score"+ score+ "ansa"+ ansa+"ansb"+ ansb+"ansc"+ansc+"ansd"+ansd+"choanswer"+ choanswer)
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/save",
                data: JSON.stringify({"typeId": typeId, "title": title, "score": score, "ansa": ansa,"ansb": ansb,"ansc":ansc,"ansd":ansd,"choanswer": choanswer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#choseAddModalForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#ChoseModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");
                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });
    $("#multiChoseAddModalForm").validate({
        rules: {
            multiTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            multiScore: {
                required: true,
            },
            multiAnsA: {
                required:true,
            },
            multiAnsB: {
                required:true,
            },
            multiAnsC: {
                required:true,
            },
            multiAnsD: {
                required:true,
            },
            multiAnsE: {
                required:true,
            },

        },
        messages: {
            //定义消息
            multiTitle: {
                required: "请输入题目!",
            },
            multiScore: {
                required: "请选择分值!"
            },
            multiAnsA: {
                required: "请输入A选项内容！"
            },
            multiAnsB: {
                required: "请输入B选项内容！"
            },
            multiAnsC: {
                required: "请输入C选项内容！"
            },
            multiAnsD: {
                required: "请输入D选项内容！"
            },
            multiAnsE: {
                required: "请输入E选项内容！"
            },

        },
        submitHandler: function (form) {
            var typeId = $.session.get('typeId');
            var title = $("#multiTitle").val();
            var score = $("#multiScore option:selected").val();
            var ansa = $("#multiAnsA").val();
            var ansb = $("#multiAnsB").val();
            var ansc = $("#multiAnsC").val();
            var ansd = $("#multiAnsD").val();
            var anse = $("#multiAnsE").val();
            var choanswer = parseInt($("#RealansA").val())+ parseInt($("#RealansB").val())+ parseInt($("#RealansC").val())+ parseInt($("#RealansD").val())+ parseInt($("#RealansE").val());

           // console.log("typeId"+ typeId+ "title"+ title+ "score"+ score+ "ansa"+ ansa+"ansb"+ ansb+"ansc"+ansc+"ansd"+ansd+"anse"+anse+"choanswer"+ choanswer)
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/save",
                data: JSON.stringify({"typeId": typeId, "title": title, "score": score, "ansa": ansa,"ansb": ansb,"ansc":ansc,"ansd":ansd,"anse":anse,"choanswer": choanswer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#multiChoseAddModalForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#MultiChoseModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");
                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });

    //删除单个问题
    function removeQuestion(quesId) {
        layer.msg('确定删除吗？此题目将从此列表和与科目绑定的列表中删除', {
            time: 0,
            btn: ['确定', '删个屁'],
            yes: function (index) {
                layer.close(index);
                $.ajax({
                    url: '/question/remove?quesId=' + quesId,
                    success: function (msg) {
                        var json = msg["data"];
                        if (json["success"]) {
                            layer.msg(json["msg"], {icon: 6,time:2000});
                            $("#questionTable").bootstrapTable("remove", {field: 'quesId', values: [quesId]});//注意参数的name
                        } else {
                            layer.msg(json["msg"], {icon: 5,time:2000});
                        }
                    },
                    error: function (data) {
                        layer.msg("未知错误！", {icon: 5,time:2000});
                    }

                })
            }
        })
    }

    //修改题目模态框初始化
    //根据题目类型加载不同的modal框
    function modifyQuestion(typeId,quesId){
        $.session.remove('typeId');
        $.session.remove('quesId');
        $.session.set('typeId',typeId);
        $.session.set('quesId',quesId);
        if(typeId==1){
            $("#ChoseModifyModal").modal('show');
        }else if(typeId==2){
            $("#MultiChoseModifyModal").modal('show');
        }else if(typeId==3){
            $("#JudgeModifyModal").modal('show');
        }else{
            $("#OtherModifyModal").modal('show');
        }
    }
    //修改modal预加载数据
    $("#ChoseModifyModal").on('show.bs.modal', function (e) {
        var typeId = $.session.get('typeId');
        var quesId = $.session.get('quesId');
        if(quesId){
            $.ajax({
                url: '/question/getquestionbyid?id=' + quesId,
                method: 'get',
                success: function (data) {
                    //console.log(data);//测试能否得到question
                    $('#choseModifyTitle').val(data.title);
                    //$('#choseModifyImg').val(data['quespic']);
                    $('#choseModifyScore').val(data.score);
                    $('#choseModifyAnsA').val(data.ansa);
                    $('#choseModifyAnsB').val(data.ansb);
                    $('#choseModifyAnsC').val(data.ansc);
                    $('#choseModifyAnsD').val(data.ansd);
                    $('#choseModifyAnswer').val(data.choanswer);
                }
            })
        }
    });
    $("#MultiChoseModifyModal").on('show.bs.modal', function (e) {
        var typeId = $.session.get('typeId');
        var quesId = $.session.get('quesId');
        if(quesId){
            $.ajax({
                url: '/question/getquestionbyid?id=' + quesId,
                method: 'get',
                success: function (data) {
                    //console.log(data);//测试能否得到question
                    $('#multiModifyTitle').val(data.title);
                    //$('#multiQuesImg').val(data['quespic']);
                    $('#multiModifyScore').val(parseInt(data.score));
                    $('#multiModifyAnsA').val(data.ansa);
                    $('#multiModifyAnsB').val(data.ansb);
                    $('#multiModifyAnsC').val(data.ansc);
                    $('#multiModifyAnsD').val(data.ansd);
                    $('#multiModifyAnsE').val(data.anse);
                    //11111
                    $("#RealModifyansA").val((Math.round(data.choanswer/10000)%10) * 10000);
                    $("#RealModifyansB").val((Math.round(data.choanswer/1000)%10) * 1000);
                    $("#RealModifyansC").val((Math.round(data.choanswer/100)%10) * 100);
                    $("#RealModifyansD").val((Math.round(data.choanswer/10)%10) * 10);
                    $("#RealModifyansE").val(data.choanswer%10);
                }

            })
        }
    });
    $("#JudgeModifyModal").on('show.bs.modal', function (e) {
        var typeId = $.session.get('typeId');
        var quesId = $.session.get('quesId');
        if(quesId){
            $.ajax({
                url: '/question/getquestionbyid?id=' + quesId,
                method: 'get',
                success: function (data) {
                    //console.log(data);//测试能否得到question
                    $('#judgeModifyTitle').val(data.title);
                    //$('#choseModifyImg').val(data['quespic']);
                    $('#judgeModifyScore').val(data.score);
                    //$('#choseModifyAnsA').val(data.ansa);
                    //$('#choseModifyAnsB').val(data.ansb);
                    //$('#choseModifyAnsC').val(data.ansc);
                    //$('#choseModifyAnsD').val(data.ansd);
                    $('#judgeModifyAnswer').val(parseInt(data.answer));


                }
            })
        }
    });
    $("#OtherModifyModal").on('show.bs.modal', function (e) {
        var typeId = $.session.get('typeId');
        var quesId = $.session.get('quesId');
        if(quesId){
            $.ajax({
                url: '/question/getquestionbyid?id=' + quesId,
                method: 'get',
                success: function (data) {
                    //console.log(data);//测试能否得到question
                    $('#otherModifyTitle').val(data.title);
                    //$('#otherQuesImg').val(data['quespic']);
                    $('#otherModifyScore').val(data.score);
                    //$('#choseModifyAnsA').val(data.ansa);
                    //$('#choseModifyAnsB').val(data.ansb);
                    //$('#choseModifyAnsC').val(data.ansc);
                    //$('#choseModifyAnsD').val(data.ansd);
                    $('#otherModifyAnswer').val(data.answer);

                }
            })
        }
    });
    //进行问题修改操作
    //修改不同的问题
    $("#choseModifyForm").validate({
        rules: {
            choseModifyTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            choseModifyScore: {
                required: true,
            },
            choseModifyAnsA: {
                required:true,
            },
            choseModifyAnsB: {
                required:true,
            },
            choseModifyAnsC: {
                required:true,
            },
            choseModifyAnsD: {
                required:true,
            },
            choseModifyAnswer: {
                required: true,
            },
        },
        messages: {
            //定义消息
            choseModifyTitle: {
                required: "请输入题目!",
            },
            choseModifyScore: {
                required: "请选择分值!"
            },
            choseModifyAnsA: {
                required: "请输入A选项内容！"
            },
            choseModifyAnsB: {
                required: "请输入A选项内容！"
            },
            choseModifyAnsC: {
                required: "请输入A选项内容！"
            },
            choseModifyAnsD: {
                required: "请输入A选项内容！"
            },
            choseModifyAnswer: {
                required: "请选择答案!",
            },
        },
        submitHandler: function (form) {
            var typeId = $.session.get('typeId');
            var quesId = $.session.get('quesId');
            var title = $("#choseModifyTitle").val();
            var score = $("#choseModifyScore").val();
            var ansa = $("#choseModifyAnsA").val();
            var ansb = $("#choseModifyAnsB").val();
            var ansc = $("#choseModifyAnsC").val();
            var ansd = $("#choseModifyAnsD").val();
            var choanswer = $("#choseModifyAnswer").val();
            //console.log("quesId"+quesId+ "typeId"+ typeId+ "title"+ title+ "score"+ score+ "ansa"+ ansa+"ansb"+ ansb+"ansc"+ansc+"ansd"+ansd+"choanswer"+ choanswer)
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/modify",
                data: JSON.stringify({"quesId":quesId, "typeId": typeId, "title": title, "score": score, "ansa": ansa,"ansb": ansb,"ansc":ansc,"ansd":ansd,"choanswer": choanswer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#choseModifyForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#ChoseModifyModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");
                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });
    $("#multiChoseModifyForm").validate({
        rules: {
            multiModifyTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            multiModifyScore: {
                required: true,
            },
            multiModifyAnsA: {
                required:true,
            },
            multiModifyAnsB: {
                required:true,
            },
            multiModifyAnsC: {
                required:true,
            },
            multiModifyAnsD: {
                required:true,
            },
            multiModifyAnsE: {
                required:true,
            },


        },
        messages: {
            //定义消息
            multiModifyTitle: {
                required: "请输入题目!",
            },
            multiModifyScore: {
                required: "请选择分值!"
            },
            multiModifyAnsA: {
                required: "请输入A选项内容！"
            },
            multiModifyAnsB: {
                required: "请输入B选项内容！"
            },
            multiModifyAnsC: {
                required: "请输入C选项内容！"
            },
            multiModifyAnsD: {
                required: "请输入D选项内容！"
            },
            multiModifyAnsE: {
                required: "请输入E选项内容！"
            },

        },
        submitHandler: function (form) {
            var quesId = $.session.get('quesId');
            var typeId = $.session.get('typeId');
            var title = $("#multiModifyTitle").val();
            var score = $("#multiModifyScore option:selected").val();
            var ansa = $("#multiModifyAnsA").val();
            var ansb = $("#multiModifyAnsB").val();
            var ansc = $("#multiModifyAnsC").val();
            var ansd = $("#multiModifyAnsD").val();
            var anse = $("#multiModifyAnsE").val();
            var choanswer = parseInt($("#RealModifyansA").val())+ parseInt($("#RealModifyansB").val())+ parseInt($("#RealModifyansC").val())+ parseInt($("#RealModifyansD").val())+ parseInt($("#RealModifyansE").val());
            // console.log("typeId"+ typeId+ "title"+ title+ "score"+ score+ "ansa"+ ansa+"ansb"+ ansb+"ansc"+ansc+"ansd"+ansd+"anse"+anse+"choanswer"+ choanswer)
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/modify",
                data: JSON.stringify({"quesId":quesId, "typeId": typeId, "title": title, "score": score, "ansa": ansa,"ansb": ansb,"ansc":ansc,"ansd":ansd,"anse":anse,"choanswer": choanswer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#multiChoseModifyForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#MultiChoseModifyModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");
                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });
    $("#judgeModifyForm").validate({
        rules: {
            judgeModifyTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            judgeModifyScore: {
                required: true,
            },
            judgeModifyAnswer: {
                required: true,
            },
        },
        messages: {
            //定义消息
            judgeModifyTitle: {
                required: "请输入题目!",
            },
            judgeModifyScore: {
                required: "请选择分值!"
            },
            judgeModifyAnswer: {
                required: "请选择答案!",
            },
        },
        submitHandler: function (form) {
            var typeId = $.session.get('typeId');
            var quesId = $.session.get('quesId');
            var title = $("#judgeModifyTitle").val();
            var score = $("#judgeModifyScore option:selected").val();
            var answer = $("#judgeModifyAnswer").val();
            //console.log(answer);
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/modify",
                data: JSON.stringify({"quesId":quesId, "typeId": typeId, "title": title, "score": score, "answer": answer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#judgeModifyForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#JudgeModifyModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");
                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });
    $("#otherModifyForm").validate({
        rules: {
            otherModifyTitle: {
                required: true,//
                minlength: 4,//4位
                maxlength: 500,//最多输入500
            },
            otherModifyScore: {
                required: true,
            },
            otherModifyAnswer: {
                required: true,
            },
        },
        messages: {
            //定义消息
            otherModifyTitle: {
                required: "请输入题目!",
            },
            otherModifyScore: {
                required: "请选择分值!"
            },
            otherModifyAnswer: {
                required: "请输入题目答案!",
            },
        },
        submitHandler: function (form) {
            var quesId = $.session.get('quesId');
            var typeId = $.session.get('typeId');
            var title = $("#otherModifyTitle").val();
            var score = $("#otherModifyScore option:selected").val();
            var answer = $("#otherModifyAnswer").val();
            //console.log(answer);
            //验证完成后提交表单
            //进行ajax传值
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: basePath + "/question/modify",
                data: JSON.stringify({"quesId":quesId, "typeId": typeId, "title": title, "score": score, "answer": answer}),
                dataType: "json",
                success: function (msg) {
                    var json = msg["data"];
                    if (json["success"]) {
                        $("#otherModifyForm")[0].reset();
                        layer.msg(json["msg"], {icon: 6, shade: 0.4, time: 2000}, function () {
                            $("#OtherModifyModal").modal('hide');
                        });
                        $("#questionTable").bootstrapTable("refresh");

                    } else {
                        layer.msg(json["msg"], {icon: 5, time: 2000});
                    }
                }
            });

        }
    });



</script>

</body>
</html>